var w=Object.defineProperty;var E=(n,e,t)=>e in n?w(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var r=(n,e,t)=>(E(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();class x{constructor(){r(this,"prefix","start-page__");r(this,"els",{page:this.getById("page"),button:this.getById("json-input-button"),fileInput:this.getById("json-input"),errorPlaceholder:this.getById("error-placeholder")});r(this,"setError",e=>{this.els.errorPlaceholder.textContent=e??"";const t=this.els.errorPlaceholder.parentElement,s={show:"grid-rows-[1fr]",hide:"grid-rows-[0fr]"};e?(t.classList.remove(s.hide),t.classList.add(s.show)):(t.classList.remove(s.show),t.classList.add(s.hide))});r(this,"hide",()=>{requestAnimationFrame(()=>{this.els.page.classList.add("-translate-x-10"),this.els.page.classList.replace("opacity-100","opacity-0")})});this.enableButtonBindings()}getById(e){const t=`${this.prefix}${e}`,s=document.getElementById(t);if(!s)throw new Error(`Element with id '${t}' not found`);return s}enableButtonBindings(){this.els.button.addEventListener("click",()=>{this.els.fileInput.click()})}onSelectFile(e){this.els.fileInput.addEventListener("change",t=>{var i;this.setError("");const s=(i=t.currentTarget.files)==null?void 0:i[0];this.setLoading(s!=null),e(s).then(()=>{this.hide()},o=>{if(this.setLoading(!1),"type"in o&&o.type==="invalid-file")return this.setError(o.message);throw o})})}setLoading(e){this.els.button.disabled=e,this.els.button.querySelector("svg").classList.toggle("hidden",!e)}}function A(n){return new ReadableStream(new C(n))}class C{constructor(e){this._port=e,this._port.onmessage=t=>this._onMessage(t.data)}start(e){this._controller=e}pull(e){const t={type:"pull"};this._port.postMessage(t)}cancel(e){const t={type:"error",reason:e};this._port.postMessage(t),this._port.close()}_onMessage(e){switch(e.type){case"write":this._controller.enqueue(e.chunk);break;case"abort":this._controller.error(e.reason),this._port.close();break;case"close":this._controller.close(),this._port.close();break}}}function _(n,e){return new WritableStream(new R(n,e))}class R{constructor(e,t={}){this._port=e,this._transferChunk=t.transferChunk,this._resetReady(),this._port.onmessage=s=>this._onMessage(s.data)}start(e){return this._controller=e,this._readyPromise}write(e,t){const s={type:"write",chunk:e};let i=this._transferChunk?this._transferChunk(e):[];return i.length?this._port.postMessage(s,i):this._port.postMessage(s),this._resetReady(),this._readyPromise}close(){const e={type:"close"};this._port.postMessage(e),this._port.close()}abort(e){const t={type:"abort",reason:e};this._port.postMessage(t),this._port.close()}_onMessage(e){switch(e.type){case"pull":this._resolveReady();break;case"error":this._onError(e.reason);break}}_onError(e){this._controller.error(e),this._rejectReady(e),this._port.close()}_resetReady(){this._readyPromise=new Promise((e,t)=>{this._readyResolve=e,this._readyReject=t}),this._readyPending=!0}_resolveReady(){this._readyResolve(),this._readyPending=!1}_rejectReady(e){this._readyPending||this._resetReady(),this._readyPromise.catch(()=>{}),this._readyReject(e),this._readyPending=!1}}class M{constructor(){const e=new MessageChannel;this.writablePort=e.port1,this.readable=A(e.port2)}}class S{constructor(e){const t=new MessageChannel;this.readablePort=t.port1,this.writable=_(t.port2,e)}}function I(){return new Worker("/assets/worker-a5684a8f.js")}function k(){const n=new I,{writable:e,readablePort:t}=new S({transferChunk(o){return o instanceof Uint8Array?[o.buffer]:[]}}),{readable:s,writablePort:i}=new M;return n.postMessage({readablePort:t,writablePort:i},[t,i]),{readable:s,writable:e}}function O({onValidFile:n,onInvalidFile:e}){let t=!1;return new TransformStream({transform(s,i){s.error&&s.error.type==="invalid-file"&&(e(s.error),i.terminate()),!t&&s.lines.length>1&&(t=!0,n()),i.enqueue(s)}})}function L(n,e={},t=[]){const s=document.createElement(n);return Object.entries(e).forEach(([i,o])=>s.setAttribute(i,o)),t=Array.isArray(t)?t:[t],t.forEach(i=>s.appendChild(typeof i=="string"?document.createTextNode(i):i)),s}function y(n){const e={};return n((...[s,...i])=>{if(!s.includes("!"))return L(s,...i);const[o,h]=s.split("!");return e[h]=L(o,...i),e[h]}),e}class F{constructor(e,t,s){r(this,"activeLine",null);r(this,"lineSelector",'[role="treeitem"]');r(this,"keyPressHandlers",{ArrowDown:this.focusNextLine.bind(this),ArrowUp:this.focusPreviousLine.bind(this),ArrowLeft:this.focusParent.bind(this),ArrowRight:this.focusFirstChild.bind(this),Home:this.focusFirstLine.bind(this),End:this.focusLastLine.bind(this)});r(this,"handleFocus",e=>{this.isElementATreeItem(e.target)&&this.setActive(e.target,!1)});r(this,"handleKeyPress",e=>{if(!this.isElementATreeItem(e.target)||e.altKey||e.ctrlKey||e.metaKey)return;let t=!1;const s=this.keyPressHandlers[e.key];s&&(t=s()),t&&e.preventDefault()});this.root=e,this.loadNextPage=t,this.loadPreviousPage=s}queryFocusedLine(){this.root.querySelector("[data-focused]")}mount(){const e=this.root.querySelector(this.lineSelector);e&&this.setActive(e,!1),this.root.addEventListener("keydown",this.handleKeyPress),this.root.addEventListener("focusin",this.handleFocus)}unmount(){this.root.removeEventListener("keydown",this.handleKeyPress),this.root.removeEventListener("focusin",this.handleFocus)}isElementATreeItem(e){return(e==null?void 0:e.getAttribute("role"))==="treeitem"}setActive(e,t=!0){this.activeLine&&this.activeLine.setAttribute("tabindex","-1"),this.activeLine=e,this.activeLine.setAttribute("tabindex","0"),t&&this.activeLine.focus()}getNextLineElement(){var e,t;if(this.activeLine!=null)return this.isElementATreeItem(this.activeLine.nextElementSibling)?this.activeLine.nextElementSibling:(t=(e=this.activeLine.parentElement)==null?void 0:e.nextElementSibling)==null?void 0:t.querySelector(this.lineSelector)}getPreviousLineElement(e){var t,s;if(e=e??this.activeLine??void 0,e!=null){if(this.isElementATreeItem(e.previousElementSibling))return e.previousElementSibling??void 0;{const i=(s=(t=e.parentElement)==null?void 0:t.previousElementSibling)==null?void 0:s.querySelectorAll(this.lineSelector);if(i)return[...i].at(-1)}}}focusNextLine(){const e=this.getNextLineElement();return e!=null?(this.activeLine===e?this.loadNextPage():this.setActive(e),!0):!1}focusPreviousLine(){const e=this.getPreviousLineElement();return e!=null?(this.activeLine===e&&this.loadPreviousPage(),this.setActive(e),!0):!1}focusParent(){if(this.activeLine!=null){const e=(parseInt(this.activeLine.ariaLevel??"1")-1).toString();let t=this.activeLine;for(;t!=null;)if(t=this.getPreviousLineElement(t),(t==null?void 0:t.ariaLevel)===e)return this.setActive(t),!0}return!1}focusFirstChild(){if(this.activeLine!=null){const e=(parseInt(this.activeLine.ariaLevel??"1")+1).toString(),t=this.getNextLineElement();if((t==null?void 0:t.ariaLevel)===e)return this.setActive(t),!0}return!1}focusFirstLine(){const e=this.root.querySelector(this.lineSelector);return e!=null?(this.activeLine===e?this.loadPreviousPage():this.setActive(e),!0):!1}focusLastLine(){const t=[...this.root.querySelectorAll(this.lineSelector)].at(-1);return t!=null?(this.activeLine!=null&&this.activeLine===t&&this.loadNextPage(),this.setActive(t),!0):!1}}var u=(n=>(n[n.OpenArray=0]="OpenArray",n[n.OpenObject=1]="OpenObject",n[n.CloseArray=2]="CloseArray",n[n.CloseObject=3]="CloseObject",n[n.Property=4]="Property",n[n.Error=5]="Error",n[n.Loading=6]="Loading",n))(u||{});function b(n){switch(n.type){case u.OpenArray:case u.OpenObject:return e(n);case u.CloseArray:case u.CloseObject:return t(n);case u.Property:return s(n);case u.Error:return i(n);case u.Loading:return o(n);default:throw Error(`Unknown line type: ${n}`)}function e(a){return p(a,l=>{a.key!=null&&a.key!==""&&l.appendChild(h(a.key)),a.type===u.OpenArray&&l.appendChild(g(a.type))})}function t(a){return p(a,l=>{l.appendChild(g(a.type))})}function s(a){return p(a,l=>{l.appendChild(h(a.key)),l.appendChild(c(a.value))})}function i(a){return p(a,l=>{const d=document.createElement("span");d.classList.add("text-red-800","border-red-800","border","p-2","my-1","rounded"),d.textContent=`⚠️ ${a.message}`,l.appendChild(d)})}function o(a){return p(a,l=>{l.classList.add("animate-pulse","min-h-[1.75rem]","items-center");const d=document.createElement("div");d.className="bg-slate-300 rounded animate-pulse w-100 h-3",d.style.width=`${a.width}%`,l.appendChild(d)})}function h(a){const l=document.createElement("span");return l.classList.add(typeof a=="string"?"text-key":"text-indenting","font-normal"),l.innerText=a+": ",l}function c(a){const l=document.createElement("span");return l.classList.add("font-normal","break-words"),l.innerText=(a==null?void 0:a.toString())??"null",l}function g(a){const l=document.createElement("span");return l.classList.add("font-bold","text-symbol"),l.innerText={[u.OpenArray]:"[",[u.OpenObject]:"{",[u.CloseArray]:"]",[u.CloseObject]:"}"}[a],l}function p(a,l){const d=document.createElement("li");d.classList.add("relative","rounded","hover:bg-sky-50","w-full","focus:outline-none","focus:ring-offset-2","focus:ring","focus:ring-sky-400"),d.setAttribute("aria-level",(a.level+1).toString()),d.setAttribute("role","treeitem"),d.setAttribute("tabindex","-1");for(let m=0;m<a.level;m++){const v=document.createElement("div");v.classList.add("absolute","border-l","border-indenting","h-full"),v.style.left=`${m*20+1.5}px`,d.appendChild(v)}a.level&&(d.style.paddingLeft=`${a.level*20}px`);const f=document.createElement("div");return f.classList.add("flex","gap-1"),d.appendChild(f),l(f),d}}class P{constructor(e,t=10){r(this,"maxLevel",4);r(this,"el",null);r(this,"observer");r(this,"isMounted",!1);this.onIntersect=e,this.numLines=t}mount(){return this.el=document.createElement("div"),this.appendLoadingLines(),this.observer=new IntersectionObserver(e=>{e[0].isIntersecting&&this.onIntersect()},{}),this.observer.observe(this.el),this.isMounted=!0,this.el}unmount(){var e,t;(e=this.observer)==null||e.disconnect(),(t=this.el)==null||t.remove(),this.el=null,this.isMounted=!1}appendLoadingLines(){var t;let e=this.getRandomLevel();for(let s=0;s<this.numLines;s++)(t=this.el)==null||t.appendChild(b({type:u.Loading,level:e,width:this.getRandomBetween(20,80)})),e=this.getRandomLevel(e)}getRandomLevel(e){let t=e??this.getRandomBetween(0,this.maxLevel);const s=Math.random();return e!=null&&(s<.25?t--:s>.75&&t++),Math.min(Math.max(t,0),this.maxLevel)}getRandomBetween(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}}class B{constructor(e,t){r(this,"el");r(this,"renderedLines",[]);r(this,"additionalRenderHeight",500);r(this,"onScrollPositionChange",null);r(this,"capturePositionAndAsyncRenderVisibleLines",()=>{this.captureScrollPosition(),this.asyncRenderVisibleLines()});r(this,"asyncRenderVisibleLines",()=>new Promise(e=>{requestAnimationFrame(()=>{this.renderVisibleLines(),e()})}));r(this,"renderVisibleLines",()=>{var i;if(this.renderedLines.length>=this.lines.length)return;const e=this.el.getBoundingClientRect(),t=window.innerHeight-(((i=this.renderedLines.at(-1))==null?void 0:i.getBoundingClientRect().top)??e.top)+this.additionalRenderHeight;let s=0;for(let o=this.renderedLines.length;o<this.lines.length&&!(s>=t);o++){const h=this.lines[o],c=b(h);this.renderedLines.push(c),this.el.appendChild(c),s+=c.getBoundingClientRect().height}});this.pageIndex=e,this.lines=t}mount(){return this.el=document.createElement("div"),this.el.classList.add("page","page"+this.pageIndex),window.addEventListener("scroll",this.capturePositionAndAsyncRenderVisibleLines,{passive:!0}),this.el}unmount(){var e;window.removeEventListener("scroll",this.capturePositionAndAsyncRenderVisibleLines),this.onScrollPositionChange=null,(e=this.el)==null||e.remove(),this.el=void 0}captureScrollPosition(){if(this.onScrollPositionChange){const e=window.innerHeight,{height:t,top:s,bottom:i}=this.el.getBoundingClientRect();if(i<0||s>e)return this.onScrollPositionChange(null);const o=t/this.renderedLines.length*this.lines.length,h=Math.min(e-s,o);this.onScrollPositionChange(h/o)}}renderAllLines(){for(let e=this.renderedLines.length;e<this.lines.length;e++){const t=this.lines[e],s=b(t);this.renderedLines.push(s),this.el.appendChild(s)}}}class j{constructor(e,t){r(this,"el");r(this,"progressEl");r(this,"positionEl");r(this,"isMounted",!1);r(this,"totalPages");this.fileSize=e,this.linesPerPage=t}mount(){const{container:e,progress:t,position:s}=y(i=>i("div!container",{class:"opacity-50 fixed w-0.5 top-4 right-4 bottom-4 ring-[1px] ring-slate-500 rounded transition duration-500 delay-500 translate-x-5"},[i("div!progress",{class:"bg-slate-400 transition-all duration-1000 shadow-md"},[]),i("div!position",{class:"top-0 left-1/2 absolute rounded-full w-2 h-2 transform -translate-x-1/2 -translate-y-1/2 bg-slate-200 ring-[1.5px] ring-slate-600 transition-all duration-100"})]));this.el=e,this.progressEl=t,this.positionEl=s,this.isMounted=!0,document.body.appendChild(this.el),requestAnimationFrame(()=>{var i;return(i=this.el)==null?void 0:i.classList.remove("translate-x-5")})}updateLoadStats({bytesRead:e,lines:t}){const s=e/this.fileSize,i=Math.ceil(t/s/this.linesPerPage);this.totalPages===void 0&&i>1&&this.mount(),this.isMounted&&(this.progressEl.style.height=`${s*100}%`),this.totalPages=i}updatePosition(e){if(this.isMounted){const t=this.totalPages,s=Math.max(...e.keys());let i=Math.max(s/t,0);i+=e.get(s)/t,this.positionEl.style.top=`${i*100}%`}}unmount(){var e;(e=this.el)==null||e.remove(),this.el=void 0,this.progressEl=void 0,this.isMounted=!1}}class V{constructor(e,t){r(this,"linesPerPage",100);r(this,"lines",[]);r(this,"lastPageIndex",1/0);r(this,"pages",[]);r(this,"loadMore",null);r(this,"visiblePages",new Map);r(this,"root");r(this,"scrollbar");r(this,"keyboardNavigator");r(this,"startObserver");r(this,"endObserver");r(this,"onReachListStart",()=>{this.pages.length>2&&this.unloadPageAt(-1);const e=this.pages.at(0).pageIndex-1;if(e>=0){const t=window.scrollY,s=this.loadPage(e,!1,"start").page;window.scrollTo({behavior:"instant",top:t+s.el.getBoundingClientRect().height}),e===0&&this.startObserver.unmount()}});r(this,"onReachListEnd",()=>{this.pages.length>2&&this.unloadPageAt(0);const e=this.pages.at(-1).pageIndex+1;e<=this.lastPageIndex?this.loadPage(e,e===this.lastPageIndex,"end"):this.endObserver.unmount()});r(this,"loadPage",(e,t,s)=>{var h;this.lines.length<(e+1)*this.linesPerPage&&((h=this.loadMore)==null||h.call(this));const i=new B(e,this.getLinesForPage(e));s==="start"?this.root.prepend(i.mount()):this.root.appendChild(i.mount());const o=Promise.resolve(s==="start"?i.renderAllLines():i.asyncRenderVisibleLines());if(i.onScrollPositionChange=c=>{c!=null?this.visiblePages.set(e,c):this.visiblePages.delete(e),this.scrollbar.updatePosition(this.visiblePages)},i.captureScrollPosition(),this.pages.push(i),this.pages.sort((c,g)=>c.pageIndex-g.pageIndex),!t&&!this.endObserver.isMounted){const c=this.endObserver.mount();this.container.appendChild(c)}return this.pages[0].pageIndex>0&&!this.startObserver.isMounted&&this.container.prepend(this.startObserver.mount()),{page:i,renderingPromise:o}});this.container=e,this.fileSize=t,this.scrollbar=new j(t,this.linesPerPage),this.startObserver=new P(this.onReachListStart,20),this.endObserver=new P(this.onReachListEnd,10)}mount(){this.root=L("div"),this.keyboardNavigator=new F(this.root,this.onReachListEnd,this.onReachListStart),this.container.appendChild(this.root)}unmount(){var e;(e=this.keyboardNavigator)==null||e.unmount(),this.scrollbar.unmount(),this.startObserver.unmount(),this.endObserver.unmount()}getLinesForPage(e){return this.lines.slice(e*this.linesPerPage,(e+1)*this.linesPerPage)}unloadPageAt(e){const t=this.pages.at(e);t==null||t.unmount(),this.pages.splice(e,1)}loadInitialPage(){this.loadPage(0,this.lastPageIndex===0,"end").renderingPromise.then(()=>{var e;this.scrollbar.updatePosition(this.visiblePages),(e=this.keyboardNavigator)==null||e.mount()})}appendLines(e,t,s){this.lines=this.lines.concat(e),this.loadMore=t,this.scrollbar.updateLoadStats({bytesRead:s,lines:this.lines.length});for(const i of this.pages)i.lines.length<this.linesPerPage&&(i.lines=this.getLinesForPage(i.pageIndex),i.renderVisibleLines());this.fileSize===s&&(this.lastPageIndex=Math.ceil(this.lines.length/this.linesPerPage)-1),this.pages.length===0&&this.loadInitialPage()}}class q{constructor(){r(this,"virtualList");r(this,"els",null);r(this,"loadMore",null);r(this,"loadJsonFile",e=>new Promise((t,s)=>{const i=this;e.stream().pipeThrough(k()).pipeThrough(O({onValidFile:()=>{this.mount(e),t()},onInvalidFile:s})).pipeTo(new WritableStream({write({lines:o,stats:{processedBytes:h,chunkIndex:c}}){return new Promise(g=>{i.virtualList.appendLines(o,g,h),c===0&&i.display(),h===e.size&&g()})}}))}))}mount(e){this.els=y(t=>t("div!page",{class:"container max-w-5xl mx-auto relative py-6 px-3 translate-x-10 opacity-0 transition duration-500 delay-200"},[t("h1!title",{class:"text-[32px] font-bold"}),t("ul!listContainer",{class:"relative text-base leading-7 pt-[10px]",role:"group"})])),this.els.title.textContent=e.name,document.body.appendChild(this.els.page),this.virtualList=new V(this.els.listContainer,e.size),this.virtualList.mount()}display(){requestAnimationFrame(()=>{this.els.page.classList.replace("opacity-0","opacity-100"),this.els.page.classList.remove("translate-x-10")})}unmount(){var e,t;(e=this.virtualList)==null||e.unmount(),(t=this.els)==null||t.page.remove(),this.els=null,this.loadMore=null}}function T(){const n=new x,e=new q;n.onSelectFile(t=>t?e.loadJsonFile(t):(n.setError(""),Promise.resolve()))}T();
